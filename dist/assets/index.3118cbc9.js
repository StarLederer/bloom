(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const r of l.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function e(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerpolicy&&(l.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?l.credentials="include":o.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(o){if(o.ep)return;o.ep=!0;const l=e(o);fetch(o.href,l)}})();const M={};function dt(t){M.context=t}const pt=(t,s)=>t===s,W={equals:pt};let ot=ct;const S=1,N=2,lt={owned:null,cleanups:null,context:null,owner:null};var w=null;let C=null,g=null,d=null,v=null,G=0;function mt(t,s){const e=g,n=w,o=t.length===0,l=o?lt:{owned:null,cleanups:null,context:null,owner:s||n},r=o?t:()=>t(()=>L(()=>K(l)));w=l,g=null;try{return P(r,!0)}finally{g=e,w=n}}function wt(t,s){s=s?Object.assign({},W,s):W;const e={value:t,observers:null,observerSlots:null,comparator:s.equals||void 0},n=o=>(typeof o=="function"&&(o=o(e.value)),it(e,o));return[yt.bind(e),n]}function z(t,s,e){const n=rt(t,s,!1,S);B(n)}function _(t,s,e){ot=vt;const n=rt(t,s,!1,S);n.user=!0,v?v.push(n):B(n)}function L(t){const s=g;g=null;try{return t()}finally{g=s}}function yt(){const t=C;if(this.sources&&(this.state||t))if(this.state===S||t)B(this);else{const s=d;d=null,P(()=>j(this),!1),d=s}if(g){const s=this.observers?this.observers.length:0;g.sources?(g.sources.push(this),g.sourceSlots.push(s)):(g.sources=[this],g.sourceSlots=[s]),this.observers?(this.observers.push(g),this.observerSlots.push(g.sources.length-1)):(this.observers=[g],this.observerSlots=[g.sources.length-1])}return this.value}function it(t,s,e){let n=t.value;return(!t.comparator||!t.comparator(n,s))&&(t.value=s,t.observers&&t.observers.length&&P(()=>{for(let o=0;o<t.observers.length;o+=1){const l=t.observers[o],r=C&&C.running;r&&C.disposed.has(l),(r&&!l.tState||!r&&!l.state)&&(l.pure?d.push(l):v.push(l),l.observers&&ft(l)),r||(l.state=S)}if(d.length>1e6)throw d=[],new Error},!1)),s}function B(t){if(!t.fn)return;K(t);const s=w,e=g,n=G;g=w=t,bt(t,t.value,n),g=e,w=s}function bt(t,s,e){let n;try{n=t.fn(s)}catch(o){t.pure&&(t.state=S),at(o)}(!t.updatedAt||t.updatedAt<=e)&&(t.updatedAt!=null&&"observers"in t?it(t,n):t.value=n,t.updatedAt=e)}function rt(t,s,e,n=S,o){const l={fn:t,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:s,owner:w,context:null,pure:e};return w===null||w!==lt&&(w.owned?w.owned.push(l):w.owned=[l]),l}function R(t){const s=C;if(t.state===0||s)return;if(t.state===N||s)return j(t);if(t.suspense&&L(t.suspense.inFallback))return t.suspense.effects.push(t);const e=[t];for(;(t=t.owner)&&(!t.updatedAt||t.updatedAt<G);)(t.state||s)&&e.push(t);for(let n=e.length-1;n>=0;n--)if(t=e[n],t.state===S||s)B(t);else if(t.state===N||s){const o=d;d=null,P(()=>j(t,e[0]),!1),d=o}}function P(t,s){if(d)return t();let e=!1;s||(d=[]),v?e=!0:v=[],G++;try{const n=t();return xt(e),n}catch(n){d||(v=null),at(n)}}function xt(t){if(d&&(ct(d),d=null),t)return;const s=v;v=null,s.length&&P(()=>ot(s),!1)}function ct(t){for(let s=0;s<t.length;s++)R(t[s])}function vt(t){let s,e=0;for(s=0;s<t.length;s++){const n=t[s];n.user?t[e++]=n:R(n)}for(M.context&&dt(),s=0;s<e;s++)R(t[s])}function j(t,s){const e=C;t.state=0;for(let n=0;n<t.sources.length;n+=1){const o=t.sources[n];o.sources&&(o.state===S||e?o!==s&&R(o):(o.state===N||e)&&j(o,s))}}function ft(t){const s=C;for(let e=0;e<t.observers.length;e+=1){const n=t.observers[e];(!n.state||s)&&(n.state=N,n.pure?d.push(n):v.push(n),n.observers&&ft(n))}}function K(t){let s;if(t.sources)for(;t.sources.length;){const e=t.sources.pop(),n=t.sourceSlots.pop(),o=e.observers;if(o&&o.length){const l=o.pop(),r=e.observerSlots.pop();n<o.length&&(l.sourceSlots[r]=n,o[n]=l,e.observerSlots[n]=r)}}if(t.owned){for(s=0;s<t.owned.length;s++)K(t.owned[s]);t.owned=null}if(t.cleanups){for(s=0;s<t.cleanups.length;s++)t.cleanups[s]();t.cleanups=null}t.state=0,t.context=null}function St(t){return t instanceof Error||typeof t=="string"?t:new Error("Unknown error")}function at(t){throw t=St(t),t}function m(t,s){return L(()=>t(s||{}))}function kt(t,s,e){let n=e.length,o=s.length,l=n,r=0,i=0,c=s[o-1].nextSibling,f=null;for(;r<o||i<l;){if(s[r]===e[i]){r++,i++;continue}for(;s[o-1]===e[l-1];)o--,l--;if(o===r){const a=l<n?i?e[i-1].nextSibling:e[l-i]:c;for(;i<l;)t.insertBefore(e[i++],a)}else if(l===i)for(;r<o;)(!f||!f.has(s[r]))&&s[r].remove(),r++;else if(s[r]===e[l-1]&&e[i]===s[o-1]){const a=s[--o].nextSibling;t.insertBefore(e[i++],s[r++].nextSibling),t.insertBefore(e[--l],a),s[o]=e[l]}else{if(!f){f=new Map;let u=i;for(;u<l;)f.set(e[u],u++)}const a=f.get(s[r]);if(a!=null)if(i<a&&a<l){let u=r,h=1,y;for(;++u<o&&u<l&&!((y=f.get(s[u]))==null||y!==a+h);)h++;if(h>a-i){const k=s[r];for(;i<a;)t.insertBefore(e[i++],k)}else t.replaceChild(e[i++],s[r++])}else r++;else s[r++].remove()}}}function Mt(t,s,e,n={}){let o;return mt(l=>{o=l,s===document?t():x(s,t(),s.firstChild?null:void 0,e)},n.owner),()=>{o(),s.textContent=""}}function T(t,s,e){const n=document.createElement("template");n.innerHTML=t;let o=n.content.firstChild;return e&&(o=o.firstChild),o}function X(t,s,e){e==null?t.removeAttribute(s):t.setAttribute(s,e)}function Ct(t,s,e){return L(()=>t(s,e))}function x(t,s,e,n){if(e!==void 0&&!n&&(n=[]),typeof s!="function")return I(t,s,n,e);z(o=>I(t,s(),o,e),n)}function I(t,s,e,n,o){for(M.context&&!e&&(e=[...t.childNodes]);typeof e=="function";)e=e();if(s===e)return e;const l=typeof s,r=n!==void 0;if(t=r&&e[0]&&e[0].parentNode||t,l==="string"||l==="number"){if(M.context)return e;if(l==="number"&&(s=s.toString()),r){let i=e[0];i&&i.nodeType===3?i.data=s:i=document.createTextNode(s),e=$(t,e,n,i)}else e!==""&&typeof e=="string"?e=t.firstChild.data=s:e=t.textContent=s}else if(s==null||l==="boolean"){if(M.context)return e;e=$(t,e,n)}else{if(l==="function")return z(()=>{let i=s();for(;typeof i=="function";)i=i();e=I(t,i,e,n)}),()=>e;if(Array.isArray(s)){const i=[],c=e&&Array.isArray(e);if(F(i,s,e,o))return z(()=>e=I(t,i,e,n,!0)),()=>e;if(M.context){if(!i.length)return e;for(let f=0;f<i.length;f++)if(i[f].parentNode)return e=i}if(i.length===0){if(e=$(t,e,n),r)return e}else c?e.length===0?Y(t,i,n):kt(t,e,i):(e&&$(t),Y(t,i));e=i}else if(s instanceof Node){if(M.context&&s.parentNode)return e=r?[s]:s;if(Array.isArray(e)){if(r)return e=$(t,e,n,s);$(t,e,null,s)}else e==null||e===""||!t.firstChild?t.appendChild(s):t.replaceChild(s,t.firstChild);e=s}}return e}function F(t,s,e,n){let o=!1;for(let l=0,r=s.length;l<r;l++){let i=s[l],c=e&&e[l];if(i instanceof Node)t.push(i);else if(!(i==null||i===!0||i===!1))if(Array.isArray(i))o=F(t,i,c)||o;else if(typeof i=="function")if(n){for(;typeof i=="function";)i=i();o=F(t,Array.isArray(i)?i:[i],Array.isArray(c)?c:[c])||o}else t.push(i),o=!0;else{const f=String(i);c&&c.nodeType===3&&c.data===f?t.push(c):t.push(document.createTextNode(f))}}return o}function Y(t,s,e=null){for(let n=0,o=s.length;n<o;n++)t.insertBefore(s[n],e)}function $(t,s,e,n){if(e===void 0)return t.textContent="";const o=n||document.createTextNode("");if(s.length){let l=!1;for(let r=s.length-1;r>=0;r--){const i=s[r];if(o!==i){const c=i.parentNode===t;!l&&!r?c?t.replaceChild(o,i):t.insertBefore(o,e):c&&i.remove()}else l=!0}}else t.insertBefore(o,e);return[o]}const J=t=>t*parseFloat(getComputedStyle(document.documentElement).fontSize),$t=t=>Number(t.slice(0,-3))*parseFloat(getComputedStyle(document.documentElement).fontSize),D={wrapp:{colors:{static:{abs:{base:{dark:{s:0,l:0}},on:[{dark:{s:10,l:100}}]},def:{base:{dark:{s:10,l:5}},on:[{dark:{s:10,l:90}},{dark:{s:20,l:80}},{dark:{s:20,l:60}},{dark:{s:20,l:40}},{dark:{s:10,l:10}}]},srf:{base:{dark:{s:40,l:20,a:10}},on:[{dark:{s:100,l:80}},{dark:{s:40,l:60}}]},srf2:{base:{dark:{s:40,l:40,a:20}},on:[{dark:{s:20,l:80}}]}},interactive:{int:{base:{dark:{s:100,l:60},light:{l:60}},on:[{dark:{s:100,l:10},light:{l:10}},{dark:{s:100,l:20},light:{l:10}},{dark:{s:100,l:40},light:{l:10}}]},int2:{base:{dark:{s:80,l:40,a:40},light:{s:90}},on:[{dark:{s:100,l:80}},{dark:{s:100,l:60}}]},int3:{base:{dark:{s:60,l:60,a:10}},on:[{dark:{s:10,l:80}}]},int4:{base:{dark:{s:20,l:20,a:20}},on:[{dark:{s:10,l:80}}]}}},sizes:{min:"1px",0:"0rem","s--":"0.2rem","s-":"0.4rem",s:"0.5rem","s+":"0.6rem","s++":"0.8rem",m0:"1rem","m--":"2rem","m-":"4rem",m:"5rem","m+":"6rem","m++":"8rem",l0:"10rem","l--":"20rem","l-":"40rem",l:"50rem","l+":"60rem","l++":"80rem",xl0:"100rem"}}},p=t=>t.filter(Boolean).join("-"),V=(t,s,e,n,o)=>[o(p([t,s]),p([e,n])),o(p([t,"b",s]),p([e,"block",n])),o(p([t,"bs",s]),p([e,"block-start",n])),o(p([t,"be",s]),p([e,"block-end",n])),o(p([t,"i",s]),p([e,"inline",n])),o(p([t,"is",s]),p([e,"inline-start",n])),o(p([t,"ie",s]),p([e,"inline-end",n]))],H=t=>`hsla(var(--hue), var(--col-${t}-s), var(--col-${t}-l), var(--col-${t}-a));`,q=t=>`hsl(var(--hue), var(--col-${t}-s), calc(var(--col-${t}-l) + var(--highlight)), var(--col-${t}-a));`,Z=(t,s)=>[new RegExp(`^(${t})-(.+)$`),(e,{theme:n})=>{const o={};return n.wrapp.colors.static[e[2]]!==void 0&&(o[s]=H(e[2])),n.wrapp.colors.interactive[e[2]]!==void 0&&(o[s]=q(e[2])),o}],Tt=t=>[new RegExp(`^(${t})-(.+)$`),(s,{theme:e})=>{const n={},o=e.wrapp.colors.static[s[2]];o!==void 0&&(n.background=H(s[2]),o.on.forEach((r,i)=>{n[`--fg${i}`]=H(`on-${s[2]}-${i}`)}));const l=e.wrapp.colors.interactive[s[2]];return l!==void 0&&(n.background=q(s[2]),l.on.forEach((r,i)=>{n[`--fg${i}`]=q(`on-${s[2]}-${i}`)})),n.color="var(--fg0)",n}],tt=(t,s)=>[new RegExp(`^(${t})-(.+)$`),(e,{theme:n})=>{const o={};return o[s]=`var(--fg${e[2]})`,o}],b=(t,s)=>[new RegExp(`^(${t})-(.+)$`),(e,{theme:n})=>{const o={};return o[s]=n.wrapp.sizes[e[2]],o}],U=(t,s,e,n)=>V(t,s,e,n,b);[new RegExp("^(hue)-(.+)$"),Tt("bg"),...V("border","color","border","color",Z),...V("border","color-fg","border","color",tt),Z("text","color"),tt("text-fg","color"),b("text","font-size"),b("width","width"),b("height","height"),b("min-width","min-width"),b("min-height","min-height"),...U("inset","","inset",""),...U("pd","","padding",""),...U("mg","","margin",""),b("round","border-radius"),b("gap","gap"),b("gap-col","column-gap"),b("gap-row","row-gap")];const ut=(t,s,e)=>t+(s-t)*e,ht=t=>{let s=0;return t.map(e=>{const n=[e[0]-s,e[1]];return s+=n[0],n})},Et=(t,s)=>{let e=t[0][0];for(let n=0;n<t.length-1;++n)if(e+=t[n+1][0],s<e)return[t[n],t[n+1],e];return[t[t.length-2],t[t.length-1],e]},gt=(t,s)=>{let[e,n,o]=Et(t,s),l=o-n[0],r=(s-l)/n[0];return ut(e[1],n[1],r)},At=(t,s)=>{const e=Array(s).fill(1);for(let n=e.length-1;n>=1;--n){let o=gt(t,(n-1)/(e.length-1));for(let l=n;l<e.length;++l)e[l]*=o;e[n-1]*=1-o}return e},_t=T("<canvas></canvas>"),O=t=>{const s=J(Number(D.wrapp.sizes["l--"].slice(0,-3))),e=J(Number(D.wrapp.sizes["l--"].slice(0,-3)));return(()=>{const n=_t.cloneNode(!0),o=t.ref;return typeof o=="function"?Ct(o,n):t.ref=n,X(n,"width",s),X(n,"height",e),n})()},Pt=t=>{let s;return _(()=>{if(!s)return;let e=s.getContext("2d");if(!e)return;const[n,o]=t.shapeSignal,l=s.width,r=s.height;e.clearRect(0,0,l,r),e.fillStyle="#fff2",e.fillRect(0,0,l,1),e.fillRect(0,0,1,r),e.strokeStyle="#fff";const i=ht(n());{e.beginPath();for(let f=0;f<l;++f){const a=gt(i,f/l);e.lineTo(f,a*r)}e.stroke()}e.fillStyle="#fff";const c=$t(D.wrapp.sizes["s--"]);n().forEach(f=>{e==null||e.beginPath(),e==null||e.arc(f[0]*l,f[1]*r,c,0,Math.PI*2),e==null||e.fill()})}),_(()=>{if(!s)return;const[e,n]=t.shapeSignal;s.addEventListener("contextmenu",o=>{o.preventDefault()}),s.addEventListener("mousedown",o=>{if(!s)return;o.cancelBubble=!0,o.stopPropagation(),o.preventDefault();var l=o.target.getBoundingClientRect(),r=o.clientX-l.left,i=o.clientY-l.top;const c=[r/s.width,i/s.height];let f=!0;e().forEach((a,u)=>{if(Math.sqrt(Math.pow(a[0]-c[0],2)+Math.pow(a[1]-c[1],2))<.1){switch(o.button){case 0:u===0?c[0]=0:u===e().length-1&&(c[0]=1),n(h=>(h[u]=c,[...h]));break;case 2:u>0&&u<e().length-1&&n(h=>(h.splice(u,1),[...h]));break}f=!1}}),f&&o.button===0&&n(a=>[...a,c].sort((u,h)=>u[0]-h[0]))})}),m(O,{ref(e){const n=s;typeof n=="function"?n(e):s=e}})},Nt=t=>{let e;return _(()=>{if(!e)return;let n=e.getContext("2d");if(!n)return;const o=e.width,l=e.height,r=ht(t.shape),i=At(r,8);n.clearRect(0,0,o,l),n.strokeStyle="#fff2";for(let c=0;c<8;++c){const f=c/7,a=o/2,u=Math.sin(f*Math.PI/2)*a,h=-Math.cos(f*Math.PI/2)*a;n.beginPath(),n.moveTo(o/2,l),n.lineTo(o/2+u,l+h),c>0&&(n.moveTo(o/2,l),n.lineTo(o/2-u,l+h)),n.stroke()}n.strokeStyle="#fff4",i.forEach((c,f)=>{if(!n)return;const a=f/(i.length-1),u=o/2,h=Math.sin(a*Math.PI/2)*u*c,y=-Math.cos(a*Math.PI/2)*u*c;n.beginPath(),n.moveTo(o/2,l),n.lineTo(o/2+h,l+y),f>0&&(n.moveTo(o/2,l),n.lineTo(o/2-h,l+y)),n.stroke()}),n.strokeStyle="#fff";for(let c=0;c<i.length-1;++c){const f=o/2,a=i[c],u=c/(i.length-1),h=Math.sin(u*Math.PI/2)*f*a,y=-Math.cos(u*Math.PI/2)*f*a,k=i[c+1],E=(c+1)/(i.length-1),A=Math.sin(E*Math.PI/2)*f*k,Q=-Math.cos(E*Math.PI/2)*f*k;n.beginPath(),n.moveTo(o/2+h,l+y),n.lineTo(o/2+A,l+Q),n.moveTo(o/2-h,l+y),n.lineTo(o/2-A,l+Q),n.stroke()}}),m(O,{ref(n){const o=e;typeof o=="function"?o(n):e=n}})},Rt=t=>{let s;return _(()=>{if(!s)return;let e=s.getContext("2d");if(!e)return;const n=s.width,o=s.height;e.clearRect(0,0,n,o),e.fillStyle="#fff2",e.fillRect(0,0,n,1),e.fillRect(0,0,1,o),e.strokeStyle="#fff",e.beginPath(),e.lineTo(0,t.shape(0)*o);for(let l=1;l<t.resolution;++l){const r=l/(t.resolution-1),i=t.shape(r);e.lineTo(r*n,i*o)}e.stroke()}),m(O,{ref(e){const n=s;typeof n=="function"?n(e):s=e}})},jt=t=>{let s;const e=()=>{const n=Array(t.resolution).fill(1);for(let o=n.length-1;o>=1;--o){let l=t.shape((o-1)/(n.length-1));for(let r=o;r<n.length;++r)n[r]*=l;n[o-1]*=1-l}return n};return _(()=>{if(!s)return;let n=s.getContext("2d");if(!n)return;const o=s.width,l=s.height,r=e();n.clearRect(0,0,o,l),n.strokeStyle="#fff2";for(let i=0;i<t.resolution;++i){const c=i/(t.resolution-1),f=o/2,a=Math.sin(c*Math.PI/2)*f,u=-Math.cos(c*Math.PI/2)*f;n.beginPath(),n.moveTo(o/2,l),n.lineTo(o/2+a,l+u),i>0&&(n.moveTo(o/2,l),n.lineTo(o/2-a,l+u)),n.stroke()}n.strokeStyle="#fff4",r.forEach((i,c)=>{if(!n)return;const f=c/(r.length-1),a=o/2,u=Math.sin(f*Math.PI/2)*a*i,h=-Math.cos(f*Math.PI/2)*a*i;n.beginPath(),n.moveTo(o/2,l),n.lineTo(o/2+u,l+h),c>0&&(n.moveTo(o/2,l),n.lineTo(o/2-u,l+h)),n.stroke()}),n.strokeStyle="#fff";for(let i=0;i<r.length-1;++i){const c=o/2,f=r[i],a=i/(r.length-1),u=Math.sin(a*Math.PI/2)*c*f,h=-Math.cos(a*Math.PI/2)*c*f,y=r[i+1],k=(i+1)/(r.length-1),E=Math.sin(k*Math.PI/2)*c*y,A=-Math.cos(k*Math.PI/2)*c*y;n.beginPath(),n.moveTo(o/2+u,l+h),n.lineTo(o/2+E,l+A),n.moveTo(o/2-u,l+h),n.lineTo(o/2-E,l+A),n.stroke()}}),m(O,{ref(n){const o=s;typeof o=="function"?o(n):s=n}})},It=T('<h2 class="font-bold text-m0 text-fg-1"></h2>'),Lt=T('<section class="flex flex-col items-center gap-m0"></section>'),Bt=T('<div class="gap-s-- flex flex-wrap justify-center"><div class="card">Curves<div class="flex flex-col gap-s-- text-fg-2"><p class="">Left click next to a point to move it</p><p class="">Right click next to a point to delete it</p><p class="">Left click away from points to create new</p></div></div><div class="card">Scattering profile</div></div>'),Ot=T('<div class="gap-s-- flex flex-wrap justify-center"><div class="card">Curves</div><div class="card">Scattering profile</div></div>'),Ut=T('<div class="flex items-center flex-col gap-m0"></div>'),et=t=>(()=>{const s=It.cloneNode(!0);return x(s,()=>t.children),s})(),nt=t=>(()=>{const s=Lt.cloneNode(!0);return x(s,()=>t.children),s})(),zt={test:[[0,.6],[.2,.6],[.4,.6],[.6,.6],[.8,.6],[1,.6]],common:[[0,.3],[.1,.8],[.2,.8],[.3,.8],[.4,.8],[.5,.8],[.6,.8],[.7,.8],[.8,.8],[.9,.8],[1,.8]],desir:[[0,.3],[.1,.8],[.5,.83],[.9,.8],[1,.7]]},Ft=(t,s,e,n,o)=>{const l=Math.pow(2*Math.pow(t,s)-1,2),i=(1+((f,a)=>(f-a*f)/(a-2*a*Math.abs(f)+1))(Math.pow(.5,1/s)-t,-1))/2,c=ut(o,n,i);return(1-l*(1-c))*e},st=t=>Ft(t,.6,.9,.3,.8),Dt=()=>{const[t,s]=wt(zt.desir);return(()=>{const e=Ut.cloneNode(!0);return x(e,m(nt,{get children(){return[m(et,{children:"Curve based"}),(()=>{const n=Bt.cloneNode(!0),o=n.firstChild,l=o.firstChild,r=l.nextSibling,i=o.nextSibling;return i.firstChild,x(o,m(Pt,{shapeSignal:[t,s]}),r),x(i,m(Nt,{get shape(){return t()}}),null),n})()]}}),null),x(e,m(nt,{get children(){return[m(et,{children:"Mathematically described"}),(()=>{const n=Ot.cloneNode(!0),o=n.firstChild;o.firstChild;const l=o.nextSibling;return l.firstChild,x(o,m(Rt,{shape:st,resolution:32}),null),x(l,m(jt,{shape:st,resolution:8}),null),n})()]}}),null),e})()};Mt(()=>m(Dt,{}),document.body);
